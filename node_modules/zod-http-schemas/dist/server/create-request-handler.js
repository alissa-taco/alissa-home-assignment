"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createRequestHandler = void 0;
function createRequestHandler(optionsOrSchema, route, handler) {
    let h = (handler !== null && handler !== void 0 ? handler : optionsOrSchema.handler);
    let requestProps = handler
        ? undefined
        : optionsOrSchema.requestProps;
    // If there are no request props to validate, return the given request handler as-is.
    if (!requestProps)
        return h;
    // Return a wrapped handler that validates the request props before invoking the given handler function.
    return (req, res, next) => {
        if (requestProps) {
            assertValid(requestProps, req);
        }
        h(req, res, next);
    };
}
exports.createRequestHandler = createRequestHandler;
function assertValid(t, v) {
    return t.parse(v);
}
//# sourceMappingURL=create-request-handler.js.map